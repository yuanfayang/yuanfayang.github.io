<!DOCTYPE html>
<html class="full-height">
<head>
  <meta charset="utf-8">
  <link rel="stylesheet" href="//cdn.bootcss.com/bulma/0.4.1/css/bulma.min.css">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
  <script src="//cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script>
  
  <title>MySQL学习笔记 | Yuan Fayang&#39;s Blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="mysql学习笔记整理">
<meta name="keywords" content="数据库,mysql,后端">
<meta property="og:type" content="article">
<meta property="og:title" content="MySQL学习笔记">
<meta property="og:url" content="http://yoursite.com/2017/02/27/mysql学习笔记/index.html">
<meta property="og:site_name" content="Yuan Fayang&#39;s Blog">
<meta property="og:description" content="mysql学习笔记整理">
<meta property="og:locale" content="zh-Hans">
<meta property="og:image" content="http://7xpayt.com1.z0.glb.clouddn.com/where%E8%AF%AD%E5%8F%A5%E9%99%90%E5%AE%9A.png">
<meta property="og:image" content="http://7xpayt.com1.z0.glb.clouddn.com/and%E5%92%8Cor%E7%9A%84%E6%AC%A1%E5%BA%8F.png">
<meta property="og:image" content="http://7xpayt.com1.z0.glb.clouddn.com/mysq_or%E5%92%8C%E5%8D%95%E4%B8%80%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%8C%B9%E9%85%8D%E6%AF%94%E8%BE%83.png">
<meta property="og:image" content="http://7xpayt.com1.z0.glb.clouddn.com/%E5%8C%B9%E9%85%8D%E5%AD%97%E7%AC%A6%E7%B1%BB.png">
<meta property="og:image" content="http://7xpayt.com1.z0.glb.clouddn.com/%E5%AE%9A%E4%BD%8D%E7%AC%A6.png">
<meta property="og:image" content="http://7xpayt.com1.z0.glb.clouddn.com/having.png">
<meta property="og:image" content="http://7xpayt.com1.z0.glb.clouddn.com/where%E5%92%8Chaving%E5%90%8C%E6%97%B6%E4%BD%BF%E7%94%A8.png">
<meta property="og:image" content="http://7xpayt.com1.z0.glb.clouddn.com/%E5%88%86%E7%BB%84%E4%B8%8E%E6%8E%92%E5%BA%8F.png">
<meta property="og:image" content="http://7xpayt.com1.z0.glb.clouddn.com/%E5%AD%90%E6%9F%A5%E8%AF%A2.png">
<meta property="og:image" content="http://7xpayt.com1.z0.glb.clouddn.com/%E8%AE%A1%E7%AE%97%E5%AD%97%E6%AE%B5%E4%BD%BF%E7%94%A8%E5%AD%90%E6%9F%A5%E8%AF%A2.png">
<meta property="og:image" content="http://7xpayt.com1.z0.glb.clouddn.com/%E8%81%94%E7%BB%93%E6%9F%A5%E8%AF%A2.png">
<meta property="og:image" content="http://7xpayt.com1.z0.glb.clouddn.com/%E5%A4%96%E8%81%94%E7%BB%93.png">
<meta property="og:image" content="http://7xpayt.com1.z0.glb.clouddn.com/lianjiezhongshiyongjuji.png">
<meta property="og:image" content="http://7xpayt.com1.z0.glb.clouddn.com/union.png">
<meta property="og:image" content="http://7xpayt.com1.z0.glb.clouddn.com/WX20170228-104249.png">
<meta property="og:image" content="http://7xpayt.com1.z0.glb.clouddn.com/bool%E6%96%87%E6%9C%AC%E6%90%9C%E7%B4%A2.png">
<meta property="og:image" content="http://7xpayt.com1.z0.glb.clouddn.com/%E5%85%A8%E6%96%87%E6%9C%AC%E5%B8%83%E5%B0%94%E6%93%8D%E4%BD%9C%E7%AC%A6.png">
<meta property="og:image" content="http://7xpayt.com1.z0.glb.clouddn.com/%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B.png">
<meta property="og:image" content="http://7xpayt.com1.z0.glb.clouddn.com/createprocedure.png">
<meta property="og:image" content="http://7xpayt.com1.z0.glb.clouddn.com/%E5%85%B3%E4%BA%8E%E5%88%86%E9%9A%94%E7%AC%A6.png">
<meta property="og:image" content="http://7xpayt.com1.z0.glb.clouddn.com/fengefu2.png">
<meta property="og:image" content="http://7xpayt.com1.z0.glb.clouddn.com/%E5%88%9B%E5%BB%BA%E8%A7%A6%E5%8F%91%E5%99%A8.png">
<meta property="og:image" content="http://7xpayt.com1.z0.glb.clouddn.com/%E4%BA%8B%E5%8A%A1%E7%9A%84%E5%87%A0%E4%B8%AA%E6%9C%AF%E8%AF%AD.png">
<meta property="og:updated_time" content="2017-12-05T01:12:02.773Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="MySQL学习笔记">
<meta name="twitter:description" content="mysql学习笔记整理">
<meta name="twitter:image" content="http://7xpayt.com1.z0.glb.clouddn.com/where%E8%AF%AD%E5%8F%A5%E9%99%90%E5%AE%9A.png">
  
    <link rel="alternate" href="/atom.xml" title="Yuan Fayang&#39;s Blog" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/common.css">
<link rel="stylesheet" href="/css/nav.css">
<link rel="stylesheet" href="/css/layout.css">
  

</head>

<body>
  <header id="navbar" class="overflow-hidden">
  <div class="container">
    <nav class="nav">
         <div class="nav-left">
            <a href="/" class="nav-item" style="font-size: 20px;">
              <span class="logo">Nemo Yuan</span>'s Blog
            </a>
         </div>
        <div class="nav-center is-hidden position-relative" id="search_container">
            <div class="nav-item full-width full-height">
                <i class="fa fa-search has-padding" aria-hidden="true"></i>
                <input type="text" id="search_input" class="search-input full-height full-width" placeholder="Search post" autofocus>
                <i id="close_search" class="fa fa-times" aria-hidden="true"></i>
            </div>
            <div id="search_result"></div>
        </div>
        <div class="nav-right nav-menu">
            <a class="nav-item" id="search">
                <i class="fa fa-search" aria-hidden="true"></i>
            </a>
            
            <a class="nav-item" href="/">
                Home
            </a>
            
            <a class="nav-item" href="/about">
                About
            </a>
            
        </div>
        <span class="nav-toggle" id="navMenuDropdown">
            <span></span>
            <span></span>
            <span></span>
        </span>
        <div class="navbar-menu position-absolute full-width content-box is-hidden-desktop is-flex flex-column center" style="top: 100%;">
            
            <a class="nav-item flex-1" href="/">
                Home
            </a>
            
            <a class="nav-item flex-1" href="/about">
                About
            </a>
            
        </div>
    </nav>
  </div>
</header>

  <div id="main-wrap" class="position-relative" style="margin-top: 55px;">
      <div class="main-inner-content">
          <!--博文页面-->

<style>
    .header-box {
        height: 370px;
        filter: blur(10px);
        background-size: cover;
        background-color: lightsteelblue;
    }

    .post-box {
        padding: 15px;
        padding-top: 60px;
        min-height: 80vh;
        margin-top: -200px;
        border-radius: 4px;
        background-color: rgba(255,255,255,.8);
    }

    .post-avatar {
        height: 30px;
        width: 30px;
        border-radius: 50%;
    }

    .flow-chart {
        text-align: center;
    }

    img[alt="post-cover"] {
        display: none;
    }
</style>
<header>
    <div id="header_box" class="header-box"></div>
</header>
<section>
    <div class="container post-box">
        <div class="content post-title is-flex center flex-column" style="margin-bottom: 70px; overflow: auto;">
            <h1 class="has-text-centered" style="padding-bottom: 10px; border-bottom: 3px solid #fff">
                <strong>MySQL学习笔记</strong>
            </h1>
            
            <div class="is-flex align-center">
                <img class="post-avatar" src="http://7xpayt.com1.z0.glb.clouddn.com/bug%E6%9D%A5%E4%BA%86.jpg">
                <span style="padding:0 10px;"> <span class="sub-title">By</span> Nemo Yuan</span>
                <span class="post-date sub-title">at: 2017-02-27</span>
            </div>
            
                <div>
                    
                         <a class="tag is-post-tag" href="/tags/数据库/">数据库</a>
                    
                         <a class="tag is-post-tag" href="/tags/mysql/">mysql</a>
                    
                         <a class="tag is-post-tag" href="/tags/后端/">后端</a>
                    
                </div>
            
        </div>
        <div class="content" style="overflow: auto">
            <ul>
<li>参考资料：mysql 必知必会  </li>
<li>示例源码下载地址：<a href="http://www.forta.com/books/0672327120/" target="_blank" rel="noopener">http://www.forta.com/books/0672327120/</a>  </li>
</ul>
<h3 id="数据检索"><a href="#数据检索" class="headerlink" title="数据检索"></a>数据检索</h3><h4 id="where-用法与数据过滤"><a href="#where-用法与数据过滤" class="headerlink" title="where 用法与数据过滤"></a>where 用法与数据过滤</h4><p> where子语句操作符：<br> <img src="http://7xpayt.com1.z0.glb.clouddn.com/where%E8%AF%AD%E5%8F%A5%E9%99%90%E5%AE%9A.png" alt="where 子语句操作符"></p>
<h4 id="空值检查"><a href="#空值检查" class="headerlink" title="空值检查"></a>空值检查</h4><ul>
<li>注：null 是no value，与0、空字符串、全部空格不同  </li>
</ul>
<p>为空判断:<br><code>IS NULL</code><br>反之，为：<br><code>sql
IS NOT NULL</code></p>
<h4 id="AND、OR数据过滤"><a href="#AND、OR数据过滤" class="headerlink" title="AND、OR数据过滤"></a>AND、OR数据过滤</h4><p>关于and、or语句的次序：SQL(像多数语言一样)在处理OR操作符前,优先处理AND操作符。如图查询接口，and语句默认与左边最近的or组合<br><img src="http://7xpayt.com1.z0.glb.clouddn.com/and%E5%92%8Cor%E7%9A%84%E6%AC%A1%E5%BA%8F.png" alt=""><br>上图中正确写法应该是：<br><code>select prod_name,prod_price,vend_id 
from products 
where (vend_id = 1002 or vend_id=1003) 
and prod_price&gt;=10</code>  </p>
<h4 id="通配符"><a href="#通配符" class="headerlink" title="通配符"></a>通配符</h4><table>
<thead>
<tr>
<th style="text-align:left">通配符</th>
<th style="text-align:left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">%</td>
<td style="text-align:left">替代一个或多个字符</td>
</tr>
<tr>
<td style="text-align:left">_</td>
<td style="text-align:left">仅替代一个字符</td>
</tr>
<tr>
<td style="text-align:left">[charlist]</td>
<td style="text-align:left">字符列表中的任何单一字符</td>
</tr>
<tr>
<td style="text-align:left">[^charlist]或者[!charlist]</td>
<td style="text-align:left">不在字符列表中的任何单一字符</td>
</tr>
</tbody>
</table>
<h4 id="正则表达式"><a href="#正则表达式" class="headerlink" title="正则表达式"></a>正则表达式</h4><ul>
<li>正则表达式（REGEXP）与LIKE的区别：两者有相似的地方，但LIKE匹配整个列，而REGEXP在列值内进行匹配。REGEXP也能用来匹配整个列值（从而起到与LIKE相同的作用），使用^和$定位符即可。  </li>
<li>MySQL自版本3.23.4后正则表达式匹配不区分大小写（大小写不敏感），为区分大小写，可使用BINARY关键字,例如：  </li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">WHERE prod_name REGEXP BINARY 'Jetpack .000';</span><br></pre></td></tr></table></figure>
<h5 id="匹配几个字符之一"><a href="#匹配几个字符之一" class="headerlink" title="匹配几个字符之一"></a>匹配几个字符之一</h5><p><img src="http://7xpayt.com1.z0.glb.clouddn.com/mysq_or%E5%92%8C%E5%8D%95%E4%B8%80%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%8C%B9%E9%85%8D%E6%AF%94%E8%BE%83.png" alt="单一字符匹配示例"><br>如图。‘[  ]’自能用于配个多个字符中的一个，‘[1000|2000]’与‘[012]’等价。  </p>
<h5 id="匹配字符类"><a href="#匹配字符类" class="headerlink" title="匹配字符类"></a>匹配字符类</h5><p><img src="http://7xpayt.com1.z0.glb.clouddn.com/%E5%8C%B9%E9%85%8D%E5%AD%97%E7%AC%A6%E7%B1%BB.png" alt="匹配字符类"></p>
<h5 id="定位符"><a href="#定位符" class="headerlink" title="定位符"></a>定位符</h5><p><img src="http://7xpayt.com1.z0.glb.clouddn.com/%E5%AE%9A%E4%BD%8D%E7%AC%A6.png" alt="定位符"><br>示例代码：<br><code>select prod_name from products where prod_name regexp &#39;^[0-9\\.]&#39; order by prod_name;</code>  </p>
<h4 id="创建计算字段"><a href="#创建计算字段" class="headerlink" title="创建计算字段"></a>创建计算字段</h4><h5 id="拼接字段-concatenate-：Concat"><a href="#拼接字段-concatenate-：Concat" class="headerlink" title="拼接字段(concatenate)：Concat(  )"></a>拼接字段(concatenate)：Concat(  )</h5><p><code>select Concat(vend_name,&#39;(&#39;,vend_country,&#39;)&#39;) 
from vendors 
order by vend_name;</code>·</p>
<ul>
<li>RTrim(  ):去掉串右边的空格，LTrim(  ):去掉串左边的空格  </li>
</ul>
<h4 id="分组数据：HAVING的用法及与WHERE的区别"><a href="#分组数据：HAVING的用法及与WHERE的区别" class="headerlink" title="分组数据：HAVING的用法及与WHERE的区别"></a>分组数据：HAVING的用法及与WHERE的区别</h4><p><img src="http://7xpayt.com1.z0.glb.clouddn.com/having.png" alt="HAVING的用法"><br>HAVING和WHERE的一种理解方式是：where是在数据分组前进行过滤，而having是在数据分组后进行过滤。这样最显著的一个区别在于：where排除的行不包含在分组中，这可能改变什么值从而影响having子句中基于该值过滤掉的分组。<br>在一条语句中，可以同时使用where和having进行分组，将where作为筛选条件：<br><img src="http://7xpayt.com1.z0.glb.clouddn.com/where%E5%92%8Chaving%E5%90%8C%E6%97%B6%E4%BD%BF%E7%94%A8.png" alt="在一条语句中同时使用where和having"><br>代码:<br><code>select vend_id,count(*) as num_prods from products where prod_price&gt;=10 group by vend_id having count(*)&gt;=2;</code>  </p>
<h4 id="分组与排序：ORDER-BY与GROUP-BY"><a href="#分组与排序：ORDER-BY与GROUP-BY" class="headerlink" title="分组与排序：ORDER BY与GROUP BY"></a>分组与排序：ORDER BY与GROUP BY</h4><p><img src="http://7xpayt.com1.z0.glb.clouddn.com/%E5%88%86%E7%BB%84%E4%B8%8E%E6%8E%92%E5%BA%8F.png" alt="order by 和 group by的区别"><br>代码：<br><code>select order_num,sum(quantity*item_price) as ordertotal from orderitems group by order_num having sum(quantity*item_price)&gt;=50 order by ordertotal desc;</code></p>
<h4 id="子查询"><a href="#子查询" class="headerlink" title="子查询"></a>子查询</h4><p><img src="http://7xpayt.com1.z0.glb.clouddn.com/%E5%AD%90%E6%9F%A5%E8%AF%A2.png" alt="子查询"><br>代码：<br><code>select cust_id 
from orders 
where order_num in (select order_num 
                    from orderitems 
                    where prod_id=&#39;TNT2&#39;);</code><br>分析：在select查询语句中，子查询总是从内向外处理。</p>
<p>在计算字段中使用子查询：<br><img src="http://7xpayt.com1.z0.glb.clouddn.com/%E8%AE%A1%E7%AE%97%E5%AD%97%E6%AE%B5%E4%BD%BF%E7%94%A8%E5%AD%90%E6%9F%A5%E8%AF%A2.png" alt="在计算字段中使用子查询"><br><code>select cust_name,
       cust_state,
       (select count(*) 
       from orders 
       where orders.cust_id=customers.cust_id) 
as orders 
from customers 
order by cust_name;</code><br>分析：涉及到外部查询的子查询成为相关子查询。这种子查询使用到列名有多义性时，使用完全限定列名，如：<code>orders.cust_id=customers.cust_id</code>。 </p>
<h4 id="联结查询"><a href="#联结查询" class="headerlink" title="联结查询"></a>联结查询</h4><p>联结查询，在没有where语句作为过滤条件时，第一个表的每一列会同第二个表的每一列都进行匹配，而不管它们在逻辑上是否匹配。这种情况下返回的结果的数目为第一个表的行数乘上第二个表行数，此结果被称为笛卡尔积。<br>因此，在联结查询时，一定要限定where，且保证where限定的正确性。<br><img src="http://7xpayt.com1.z0.glb.clouddn.com/%E8%81%94%E7%BB%93%E6%9F%A5%E8%AF%A2.png" alt="联结查询"><br>代码：<br><code>select vend_name,prod_name,prod_price 
from vendors,products 
where vendors.vend_id=products.vend_id 
order by vend_name,prod_name;</code>  </p>
<h5 id="内联结"><a href="#内联结" class="headerlink" title="内联结"></a>内联结</h5><p><code>select vend_name,prod_name,prod_price 
from vendors 
inner join products 
where vendors.vend_id=products.vend_id 
order by vend_name,prod_name;</code><br>如上所致<em>等值联结</em>也称为<em>内部联结</em>。联结多表时，SQL对于联结表的数据没有限定，联结规则也和两张表的联结相同。<br>多表联结示例代码：<br><code>select prod_name,vend_name,prod_price,quantity 
from orderitems,products,vendors 
where products.vend_id=vendors.vend_id 
and orderitems.prod_id=products.prod_id 
and order_num=20005;</code> </p>
<h5 id="使用表别名"><a href="#使用表别名" class="headerlink" title="使用表别名"></a>使用表别名</h5><p><code>select cust_name,cust_contact 
from customers 
as c,orders as o,orderitems as oi 
where c.cust_id=o.cust_id 
and oi.order_num=o.order_num 
and prod_id=&#39;TNT2&#39;;</code><br>注意：表别名只在查询中使用，与列别名不一样，表别名不返回到客户机。  </p>
<h5 id="自联结"><a href="#自联结" class="headerlink" title="自联结"></a>自联结</h5><p><code>select p1.prod_id,p1.prod_name 
from products as p1,products as p2 
where p1.vend_id=p2.vend_id 
and p2.prod_id=&#39;DTNTR&#39;;</code></p>
<h5 id="自然联结"><a href="#自然联结" class="headerlink" title="自然联结"></a>自然联结</h5><p>无论何时对表进行联结，应该至少有一个列出现在不止一个表中(被联结的列)。标准的联结返回所有数据，甚至相同的列多次出现。自然联结排除多次出现，使每个列只返回一次.<br><code>select c.*,o.order_num,o.order_date,oi.prod_id,oi.quantity,oi.item_price 
from customers as c,orders as o,orderitems as oi 
where c.cust_id=o.cust_id 
and oi.order_num=o.order_num 
and prod_id=&#39;FB&#39;;</code></p>
<h5 id="外部联结"><a href="#外部联结" class="headerlink" title="外部联结"></a>外部联结</h5><p>与内部联结不同，外部联结用outer join …… on 来指定联结类型，而不是在where中，并且，外部联结还包括那些没有关联行的行。在使用outer join语法时，必须使用left和right来指定包含其所有行的表。<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> customers.cust_id,orders.order_num </span><br><span class="line"><span class="keyword">from</span> customers </span><br><span class="line"><span class="keyword">left</span> <span class="keyword">outer</span> <span class="keyword">join</span> orders </span><br><span class="line"><span class="keyword">on</span> customers.cust_id=orders.cust_id;</span><br></pre></td></tr></table></figure></p>
<p>实现效果图：<br><img src="http://7xpayt.com1.z0.glb.clouddn.com/%E5%A4%96%E8%81%94%E7%BB%93.png" alt="外联查询">  </p>
<blockquote>
<p><strong>外联结的类型</strong>  存在两种基本类型的外联结：左外联结和右外联结。它们之间唯一的区别就是所关联表的顺序不同。可以通过颠倒<code>from</code>和<code>where</code>子句中表的顺序来转换类型。因此两种类型可以互换使用。  </p>
</blockquote>
<p>附：联结中使用聚集函数<br><img src="http://7xpayt.com1.z0.glb.clouddn.com/lianjiezhongshiyongjuji.png" alt="联结中使用聚集函数">  </p>
<blockquote>
<p><strong>注意：</strong>  </p>
<ul>
<li>一般使用内联结，但是使用外联结也是有效的；  </li>
<li>应该提供联结条件，不然会返回笛卡尔积；应该提供正确的联结条件，否则返回的数据不正确；</li>
<li>一个联结中可以包含多表，且每个联结可以使用不同的类型；  </li>
</ul>
</blockquote>
<h4 id="组合查询"><a href="#组合查询" class="headerlink" title="组合查询"></a>组合查询</h4><p>利用<code>union</code>操作符来组合多条<code>select</code>语句查询。<code>union</code>可以将它们的结果组合成一个结果集。</p>
<h5 id="使用UNION"><a href="#使用UNION" class="headerlink" title="使用UNION"></a>使用UNION</h5><p>示例代码：<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> vend_id,prod_id,prod_price </span><br><span class="line"><span class="keyword">from</span> products </span><br><span class="line"><span class="keyword">where</span> prod_price&lt;=<span class="number">5</span> </span><br><span class="line"><span class="keyword">union</span> </span><br><span class="line"><span class="keyword">select</span> vend_id,prod_id,prod_price </span><br><span class="line"><span class="keyword">from</span> products </span><br><span class="line"><span class="keyword">where</span> vend_id <span class="keyword">in</span> (<span class="number">1001</span>,<span class="number">1002</span>);</span><br></pre></td></tr></table></figure></p>
<p><img src="http://7xpayt.com1.z0.glb.clouddn.com/union.png" alt="結果集"><br>这里，也可以用多条<code>where</code>实现：<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> vend_id,prod_id,prod_price </span><br><span class="line"><span class="keyword">from</span> products </span><br><span class="line"><span class="keyword">where</span> prod_price&lt;=<span class="number">5</span> </span><br><span class="line"><span class="keyword">or</span> vend_id <span class="keyword">in</span> (<span class="number">1001</span>,<span class="number">1002</span>);</span><br></pre></td></tr></table></figure></p>
<p><strong>使用UNION的注意事项</strong>：</p>
<ul>
<li>必须包含两条或两条以上的<code>select</code>语句，语句之间用<code>union</code>操作符关联;</li>
<li>每个查询必须包含相同的列、表达式或聚集函数（各列不需要以相同的次序出现);</li>
<li>列数据类型必须兼容：列数据不必相同，但是必须DBMS可以隐式转化的类型;  </li>
</ul>
<h5 id="包含或取消重复"><a href="#包含或取消重复" class="headerlink" title="包含或取消重复"></a>包含或取消重复</h5><p>默认情况下，<code>union</code>是会在结果集中排除重复的，如果需要，可以使用<code>union all</code>包含重复行。<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> vend_id,prod_id,prod_price </span><br><span class="line"><span class="keyword">from</span> products </span><br><span class="line"><span class="keyword">where</span> prod_price&lt;=<span class="number">5</span> </span><br><span class="line"><span class="keyword">union</span> all </span><br><span class="line"><span class="keyword">select</span> vend_id,prod_id,prod_price </span><br><span class="line"><span class="keyword">from</span> products </span><br><span class="line"><span class="keyword">where</span> vend_id <span class="keyword">in</span> (<span class="number">1001</span>,<span class="number">1002</span>);</span><br></pre></td></tr></table></figure></p>
<h5 id="对结果集进行排序"><a href="#对结果集进行排序" class="headerlink" title="对结果集进行排序"></a>对结果集进行排序</h5><p>使用<code>order by</code>对<code>union</code>结果集进行排序时，只能在最后一个<code>select</code>语句后使用一个<code>order by</code>子句。因此，不存在对结果集中的一部分使用一种排序形式，而另一部分使用另一种形式。<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> vend_id,prod_id,prod_price </span><br><span class="line"><span class="keyword">from</span> products </span><br><span class="line"><span class="keyword">where</span> prod_price&lt;=<span class="number">5</span> </span><br><span class="line"><span class="keyword">union</span> </span><br><span class="line"><span class="keyword">select</span> vend_id,prod_id,prod_price </span><br><span class="line"><span class="keyword">from</span> products </span><br><span class="line"><span class="keyword">where</span> vend_id <span class="keyword">in</span> (<span class="number">1001</span>,<span class="number">1002</span>) </span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> vend_id,prod_price;</span><br></pre></td></tr></table></figure></p>
<p><img src="http://7xpayt.com1.z0.glb.clouddn.com/WX20170228-104249.png" alt="查询结果排序"></p>
<h4 id="全文搜索"><a href="#全文搜索" class="headerlink" title="全文搜索"></a>全文搜索</h4><blockquote>
<p>并非所有的引擎都支持全文搜索。两个最常使用的引擎为MyISAM和InnoDB， 前者支持全文本搜索，而后者不支持。  </p>
</blockquote>
<p><code>like</code>和正则表达式的搜索机制非常有用，但是也存在几个重要的限制:</p>
<ul>
<li><strong>性能</strong> 通配符和正则表达式会尝试匹配表中的所有行。因此，由于被搜索行数不断增加，这些搜索可能非常耗时。  </li>
<li><strong>明确控制</strong> 使用通配符和正则表达式匹配，很难(而且并不总是能)明确地控制匹配什么和不匹配什么。  </li>
<li><strong>智能化的结果</strong> 虽然基于通配符和正则表达式的搜索提供了非 常灵活的搜索，但它们都不能提供一种智能化的选择结果的方法。 例如，一个特殊词的搜索将会返回包含该词的所有行，而不区分 包含单个匹配的行和包含多个匹配的行(按照可能是更好的匹配 来排列它们)。类似，一个特殊词的搜索将不会找出不包含该词但 包含其他相关词的行。  </li>
</ul>
<h5 id="使用全文搜索"><a href="#使用全文搜索" class="headerlink" title="使用全文搜索"></a>使用全文搜索</h5><p>为了进行全文本搜索，必须索引被搜索的列，而且要随着数据的改 变不断地重新索引。在对表列进行适当设计后，MySQL会自动进行所有 的索引和重新索引。<br>在索引之后，<code>SELECT</code>可与<code>Match()</code>和<code>Against()</code>一起使用以实际执行搜索。  </p>
<h5 id="启用全文搜索支持"><a href="#启用全文搜索支持" class="headerlink" title="启用全文搜索支持"></a>启用全文搜索支持</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> productnotes</span><br><span class="line">(</span><br><span class="line">  note_id    <span class="built_in">int</span>           <span class="keyword">NOT</span> <span class="literal">NULL</span> AUTO_INCREMENT,</span><br><span class="line">  prod_id    <span class="built_in">char</span>(<span class="number">10</span>)      <span class="keyword">NOT</span> <span class="literal">NULL</span>,</span><br><span class="line">  note_date datetime       <span class="keyword">NOT</span> <span class="literal">NULL</span>,</span><br><span class="line">  note_text  <span class="built_in">text</span>          <span class="literal">NULL</span> ,</span><br><span class="line">  PRIMARY <span class="keyword">KEY</span>(note_id),</span><br><span class="line">  FULLTEXT(note_text)</span><br><span class="line">) <span class="keyword">ENGINE</span>=MyISAM;</span><br></pre></td></tr></table></figure>
<p>在定义了之后，mysql会自动维护索引，在增加、删除或删除行时，索引随之自动更新。  </p>
<h5 id="使用全文搜索-1"><a href="#使用全文搜索-1" class="headerlink" title="使用全文搜索"></a>使用全文搜索</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> note_text </span><br><span class="line"><span class="keyword">from</span> productnotes </span><br><span class="line"><span class="keyword">where</span> <span class="keyword">match</span>(note_text) against(<span class="string">'rabbit'</span>);</span><br></pre></td></tr></table></figure>
<p><strong><code>match()</code>说明</strong> </p>
<ul>
<li>传递给<code>Match()</code>的值必须与<code>FULLTEXT()</code>定义中的相同。如果指定多个列，则必须列出它们(而且次序正确)。</li>
<li>除非使用BINARY方式,否则全文本搜索不区分大小写。</li>
<li>会返回按文本匹配良好程度排序返回数据。  </li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> note_text,</span><br><span class="line">       <span class="keyword">match</span>(note_text) against(<span class="string">'rabbit'</span>) <span class="keyword">as</span> <span class="keyword">rank</span> </span><br><span class="line"><span class="keyword">from</span> productnotes;</span><br></pre></td></tr></table></figure>
<h5 id="使用查询扩展"><a href="#使用查询扩展" class="headerlink" title="使用查询扩展"></a>使用查询扩展</h5><p>查询扩展用来设法放宽所返回的全文本搜索结果的范围。它可以找出可能与你的搜索有关的所有其他行。<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> note_text </span><br><span class="line"><span class="keyword">from</span> productnotes </span><br><span class="line"><span class="keyword">where</span> <span class="keyword">match</span>(note_text) against(<span class="string">'anvils'</span> <span class="keyword">with</span> <span class="keyword">query</span> expansion);</span><br></pre></td></tr></table></figure></p>
<h5 id="布尔文本搜索"><a href="#布尔文本搜索" class="headerlink" title="布尔文本搜索"></a>布尔文本搜索</h5><p><img src="http://7xpayt.com1.z0.glb.clouddn.com/bool%E6%96%87%E6%9C%AC%E6%90%9C%E7%B4%A2.png" alt="布尔文本搜索"></p>
<blockquote>
<ul>
<li>没有<code>FULLTEXT</code>索引也可以使用布尔文本搜索  </li>
</ul>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> note_text </span><br><span class="line"><span class="keyword">from</span> productnotes </span><br><span class="line"><span class="keyword">where</span> <span class="keyword">match</span>(note_text) against(<span class="string">'heavy -rope*'</span> <span class="keyword">in</span> <span class="built_in">boolean</span> <span class="keyword">mode</span>);</span><br></pre></td></tr></table></figure>
<p><img src="http://7xpayt.com1.z0.glb.clouddn.com/%E5%85%A8%E6%96%87%E6%9C%AC%E5%B8%83%E5%B0%94%E6%93%8D%E4%BD%9C%E7%AC%A6.png" alt="全文布尔搜索的操作符"></p>
<h3 id="插入数据"><a href="#插入数据" class="headerlink" title="插入数据"></a>插入数据</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> customers </span><br><span class="line"><span class="keyword">values</span>(<span class="literal">null</span>,<span class="string">'Pep E. LaPew'</span>,<span class="string">'100 Main Street'</span>,<span class="string">'Los Angeles'</span>,<span class="string">'CA'</span>,<span class="string">'90046'</span>,<span class="string">'USA'</span>,<span class="literal">null</span>,<span class="literal">null</span>);</span><br></pre></td></tr></table></figure>
<blockquote>
<ul>
<li><strong>总是使用列的列表</strong> 一般不要使用没有明确给出列的列表的 INSERT语句。使用列的列表能使SQL代码继续发挥作用，即使表结构发生了变化.  </li>
<li><strong>仔细地给出值</strong> 不管使用哪种INSERT语法，都必须给出 VALUES的正确数目。如果不提供列名，则必须给每个表列提供 一个值。如果提供列名，则必须对每个列出的列给出一个值。 如果不这样，将产生一条错误消息，相应的行插入不成功。  </li>
<li><strong>提高整体性能</strong> 数据检索是最重要的(通常是这样)，则你可以通过在 INSERT和INTO之间添加关键字LOW_PRIORITY，指示MySQL 降低INSERT语句的优先级。  </li>
</ul>
</blockquote>
<h4 id="插入检索出的数据"><a href="#插入检索出的数据" class="headerlink" title="插入检索出的数据"></a>插入检索出的数据</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> customers(cust_id,cust_contact,cust_email,cust_name,cust_address,cust_city,cust_statte,cust_zip,cust_country) </span><br><span class="line"><span class="keyword">select</span> cust_id,cust_contact,cust_email,cust_name,cust_address,cust_city,cust_state,cust_zip,cust_country </span><br><span class="line"><span class="keyword">from</span> custnew;</span><br></pre></td></tr></table></figure>
<h3 id="更新或删除数据"><a href="#更新或删除数据" class="headerlink" title="更新或删除数据"></a>更新或删除数据</h3><h4 id="更新数据"><a href="#更新数据" class="headerlink" title="更新数据"></a>更新数据</h4><p><code>update</code>语句的三个组成部分:  </p>
<ul>
<li>更新的表</li>
<li>列名和它的新值</li>
<li>确定要更新的过滤条件  </li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">update</span> customers </span><br><span class="line"><span class="keyword">set</span> cust_email=<span class="string">'elmer@fudd.com'</span> </span><br><span class="line"><span class="keyword">where</span> cust_id=<span class="number">10005</span>;</span><br></pre></td></tr></table></figure>
<h4 id="删除数据"><a href="#删除数据" class="headerlink" title="删除数据"></a>删除数据</h4><ul>
<li>从表中删除特定的行</li>
<li>从表中删除所有的行  </li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> customers <span class="keyword">where</span> cust_id=<span class="number">10006</span>;</span><br></pre></td></tr></table></figure>
<h3 id="创建和修改表"><a href="#创建和修改表" class="headerlink" title="创建和修改表"></a>创建和修改表</h3><h4 id="创建表"><a href="#创建表" class="headerlink" title="创建表"></a>创建表</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> customers</span><br><span class="line">(</span><br><span class="line">  cust_id      <span class="built_in">int</span>       <span class="keyword">NOT</span> <span class="literal">NULL</span> AUTO_INCREMENT,</span><br><span class="line">  cust_name    <span class="built_in">char</span>(<span class="number">50</span>)  <span class="keyword">NOT</span> <span class="literal">NULL</span> ,</span><br><span class="line">  cust_address <span class="built_in">char</span>(<span class="number">50</span>)  <span class="literal">NULL</span> ,</span><br><span class="line">  cust_city    <span class="built_in">char</span>(<span class="number">50</span>)  <span class="literal">NULL</span> ,</span><br><span class="line">  cust_state   <span class="built_in">char</span>(<span class="number">5</span>)   <span class="literal">NULL</span> ,</span><br><span class="line">  cust_zip     <span class="built_in">char</span>(<span class="number">10</span>)  <span class="literal">NULL</span> ,</span><br><span class="line">  cust_country <span class="built_in">char</span>(<span class="number">50</span>)  <span class="literal">NULL</span> ,</span><br><span class="line">  cust_contact <span class="built_in">char</span>(<span class="number">50</span>)  <span class="literal">NULL</span> ,</span><br><span class="line">  cust_email   <span class="built_in">char</span>(<span class="number">255</span>) <span class="literal">NULL</span> ,</span><br><span class="line">  PRIMARY <span class="keyword">KEY</span> (cust_id)</span><br><span class="line">) <span class="keyword">ENGINE</span>=<span class="keyword">InnoDB</span>;</span><br></pre></td></tr></table></figure>
<h4 id="更新表"><a href="#更新表" class="headerlink" title="更新表"></a>更新表</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> vendors <span class="keyword">add</span> vend_phone <span class="built_in">char</span>(<span class="number">20</span>);</span><br></pre></td></tr></table></figure>
<p>添加外键:<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> orderitems </span><br><span class="line"><span class="keyword">add</span> <span class="keyword">constraint</span> fk_orderitems_orders </span><br><span class="line">foreign <span class="keyword">key</span> (order_num) </span><br><span class="line"><span class="keyword">references</span> orders(order_num);</span><br></pre></td></tr></table></figure></p>
<h4 id="删除表"><a href="#删除表" class="headerlink" title="删除表"></a>删除表</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">drop</span> <span class="keyword">table</span> customers2;</span><br></pre></td></tr></table></figure>
<h4 id="重命名表"><a href="#重命名表" class="headerlink" title="重命名表"></a>重命名表</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">rename</span> <span class="keyword">table</span> customers2 <span class="keyword">to</span> customers;</span><br></pre></td></tr></table></figure>
<h3 id="视图"><a href="#视图" class="headerlink" title="视图"></a>视图</h3><p>视图是虚拟表。与包含数据的表不同，视图只包含使用动态检索数据的查询。</p>
<blockquote>
<p><strong>视图的规则和限制</strong>:</p>
<ul>
<li>必须唯一命名。</li>
<li>可创建视图数目没有限制。</li>
<li>可以嵌套使用，即可以从其他视图中检索出来的数据来构建新的视图。</li>
<li><code>order by</code>可以用于视图，但该视图包含的<code>select</code>语句中也包含<code>order by</code>那么该<code>order by</code>将被覆盖。</li>
<li>视图不能使用索引，也不能关联触发器或默认值。</li>
<li>视图可以和表一起用。  </li>
</ul>
</blockquote>
<h4 id="视图的使用"><a href="#视图的使用" class="headerlink" title="视图的使用"></a>视图的使用</h4><blockquote>
<ul>
<li>使用<code>create view</code>来创建视图</li>
<li>使用<code>show create view viewname</code>来查看创建视图的语句</li>
<li>使用<code>drop view viewname</code>来删除视图</li>
<li>使用<code>create or replace</code>来更新视图，不存在时创建，存在时更新  </li>
</ul>
</blockquote>
<p> 创建视图:<br> <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">view</span> productcustomers </span><br><span class="line"><span class="keyword">as</span> </span><br><span class="line"><span class="keyword">select</span> cust_name,cust_contact,prod_id </span><br><span class="line"><span class="keyword">from</span> customers,orders,orderitems </span><br><span class="line"><span class="keyword">where</span> customers.cust_id=orders.cust_id </span><br><span class="line"><span class="keyword">and</span> orderitems.order_num=orders.order_num;</span><br></pre></td></tr></table></figure></p>
<p> 检索视图:<br> <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> productcustomers <span class="keyword">where</span> prod_id=<span class="string">'TNT2'</span>;</span><br></pre></td></tr></table></figure></p>
<p> 利用视图来格式化检索出的数据:<br> <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">view</span> vendorlocation </span><br><span class="line"><span class="keyword">as</span> </span><br><span class="line"><span class="keyword">select</span> <span class="keyword">concat</span>(<span class="keyword">rtrim</span>(vend_name),<span class="string">'('</span>,<span class="keyword">rtrim</span>(vend_country),<span class="string">')'</span>) </span><br><span class="line"><span class="keyword">from</span> vendors </span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> vend_name;</span><br></pre></td></tr></table></figure></p>
<p> 利用视图来过滤不需要的数据<br> <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">view</span> customeremaillist </span><br><span class="line"><span class="keyword">as</span> </span><br><span class="line"><span class="keyword">select</span> cust_id,cust_name,cust_email </span><br><span class="line"><span class="keyword">from</span> customers </span><br><span class="line"><span class="keyword">where</span> cust_email <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">null</span>;</span><br></pre></td></tr></table></figure></p>
<p> 使用视图与计算字段<br> <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">view</span> orderitemsexpand </span><br><span class="line"><span class="keyword">as</span> </span><br><span class="line"><span class="keyword">select</span> order_num,</span><br><span class="line">       prod_id,</span><br><span class="line">       quantity,</span><br><span class="line">       item_price,</span><br><span class="line">       quantity*item_price <span class="keyword">as</span> expand_price </span><br><span class="line"><span class="keyword">from</span> orderitems;</span><br></pre></td></tr></table></figure></p>
<h4 id="视图的更新"><a href="#视图的更新" class="headerlink" title="视图的更新"></a>视图的更新</h4><p> 通常，视图是可以更新的（可以进行insert，update，delete）更新一个数据将更新到它的基表。例如，你对一个视图进行增加或删除行，实际上是对其基表进行增加或删除。但实际上，视图主要用于数据检索。<br> 以下情况不允许更新:  </p>
<ul>
<li>使用了分组(group by和having)</li>
<li>联结</li>
<li>子查询 </li>
<li>并 </li>
<li>聚集函数(max(),min(),sum()等)</li>
<li>distinct</li>
<li>导出（计算）列  </li>
</ul>
<h3 id="存储过程"><a href="#存储过程" class="headerlink" title="存储过程"></a>存储过程</h3><p><img src="http://7xpayt.com1.z0.glb.clouddn.com/%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B.png" alt="存储过程"></p>
<h4 id="使用存储过程"><a href="#使用存储过程" class="headerlink" title="使用存储过程"></a>使用存储过程</h4><p>创建存储过程:<br><img src="http://7xpayt.com1.z0.glb.clouddn.com/createprocedure.png" alt="命令行创建存储过程"><br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">delimiter //</span><br><span class="line"></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">procedure</span> prodcutpricing() </span><br><span class="line"><span class="keyword">begin</span> </span><br><span class="line">  <span class="keyword">select</span> <span class="keyword">avg</span>(prod_price) </span><br><span class="line">  <span class="keyword">as</span> priceaverage </span><br><span class="line">  <span class="keyword">from</span> products; </span><br><span class="line"><span class="keyword">end</span> //</span><br><span class="line"></span><br><span class="line">delimiter ;</span><br></pre></td></tr></table></figure></p>
<p><img src="http://7xpayt.com1.z0.glb.clouddn.com/%E5%85%B3%E4%BA%8E%E5%88%86%E9%9A%94%E7%AC%A6.png" alt="关于命令行客户机的分隔符"><br><img src="http://7xpayt.com1.z0.glb.clouddn.com/fengefu2.png" alt="关于命令行客户机的分隔符"><br>使用存储过程:<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">call</span> productpricing();</span><br></pre></td></tr></table></figure></p>
<p>删除存储过程：<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">drop</span> <span class="keyword">procedure</span> prodcutpricing;</span><br></pre></td></tr></table></figure></p>
<h4 id="使用变量"><a href="#使用变量" class="headerlink" title="使用变量"></a>使用变量</h4><p>创建带参数的存储过程：<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">delimiter |</span><br><span class="line"></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">procedure</span> productpricing(</span><br><span class="line">                                <span class="keyword">out</span> p1 <span class="built_in">decimal</span>(<span class="number">8</span>,<span class="number">2</span>),</span><br><span class="line">                                <span class="keyword">out</span> ph <span class="built_in">decimal</span>(<span class="number">8</span>,<span class="number">2</span>),</span><br><span class="line">                                <span class="keyword">out</span> pa <span class="built_in">decimal</span>(<span class="number">8</span>,<span class="number">2</span>)) </span><br><span class="line"><span class="keyword">begin</span> </span><br><span class="line">  <span class="keyword">select</span> <span class="keyword">min</span>(prod_price) <span class="keyword">into</span> p1 <span class="keyword">from</span> products;</span><br><span class="line">  <span class="keyword">select</span> <span class="keyword">max</span>(prod_price) <span class="keyword">into</span> ph <span class="keyword">from</span> products;</span><br><span class="line">  <span class="keyword">select</span> <span class="keyword">avg</span>(prod_price) <span class="keyword">into</span> pa <span class="keyword">from</span> products; </span><br><span class="line"><span class="keyword">end</span> |</span><br><span class="line"></span><br><span class="line">delimiter ;</span><br></pre></td></tr></table></figure></p>
<p>使用此存储过程：<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">call</span> productpricing(@pricelow,@pricehigh,@priceaverage);</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> @pricehigh,@pricelow,@priceaverage;</span><br></pre></td></tr></table></figure></p>
<blockquote>
<p><strong>变量名</strong> 所有mysql的变量名都必须使用@开始  </p>
</blockquote>
<p>创建带输入输出的存储过程:<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">procedure</span> ordertotal(</span><br><span class="line">                            <span class="keyword">in</span> onumber <span class="built_in">int</span>,</span><br><span class="line">                            <span class="keyword">out</span> ototal <span class="built_in">decimal</span>(<span class="number">8</span>,<span class="number">2</span>)) </span><br><span class="line"><span class="keyword">begin</span> </span><br><span class="line">  <span class="keyword">select</span> <span class="keyword">sum</span>(item_price*quantity) </span><br><span class="line">  <span class="keyword">from</span> orderitems </span><br><span class="line">  <span class="keyword">where</span> order_num=onumber </span><br><span class="line">  <span class="keyword">into</span> ototal; </span><br><span class="line"><span class="keyword">end</span> |</span><br></pre></td></tr></table></figure></p>
<p>使用此存储过程：<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">call</span> ordertotal(<span class="number">20005</span>,@total);</span><br><span class="line"><span class="keyword">select</span> @total;</span><br></pre></td></tr></table></figure></p>
<p>建立智能存储过程：<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">DELIMITER |</span><br><span class="line"></span><br><span class="line"><span class="keyword">USE</span> mysql_train|</span><br><span class="line"></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">PROCEDURE</span> <span class="keyword">IF</span> <span class="keyword">EXISTS</span> ordertotal|</span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">PROCEDURE</span> ordertotal(</span><br><span class="line">	<span class="keyword">IN</span> onumber <span class="built_in">INT</span>,</span><br><span class="line">	<span class="keyword">IN</span> taxable <span class="built_in">BOOLEAN</span>,</span><br><span class="line">	<span class="keyword">OUT</span> ototal <span class="built_in">DECIMAL</span>(<span class="number">8</span>,<span class="number">2</span>)</span><br><span class="line">) <span class="keyword">COMMENT</span> <span class="string">'Obtain order total, optionally add tax'</span></span><br><span class="line"><span class="keyword">BEGIN</span> </span><br><span class="line">	<span class="comment">-- Declare variable for total</span></span><br><span class="line">	<span class="keyword">DECLARE</span> total <span class="built_in">DECIMAL</span>(<span class="number">8</span>,<span class="number">2</span>);</span><br><span class="line">	<span class="comment">-- Declare tax percentage</span></span><br><span class="line">	<span class="keyword">DECLARE</span> taxrate <span class="built_in">INT</span> <span class="keyword">DEFAULT</span> <span class="number">6</span>;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">-- Get the order total</span></span><br><span class="line">	<span class="keyword">SELECT</span> <span class="keyword">SUM</span>(item_price*quantity) <span class="keyword">FROM</span> orderitems <span class="keyword">WHERE</span> order_num=onumber <span class="keyword">INTO</span> total;</span><br><span class="line"></span><br><span class="line">	<span class="comment">-- If taxable?</span></span><br><span class="line">	IF taxable THEN</span><br><span class="line">		<span class="comment">-- Yes,so add taxrate to the total</span></span><br><span class="line">		<span class="keyword">SELECT</span> total+(total/<span class="number">100</span>*taxrate) <span class="keyword">INTO</span> total;</span><br><span class="line">	<span class="keyword">END</span> <span class="keyword">IF</span>;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">-- And finally,save to our variable</span></span><br><span class="line">	<span class="keyword">SELECT</span> total <span class="keyword">INTO</span> ototal;</span><br><span class="line"><span class="keyword">END</span> |</span><br><span class="line"></span><br><span class="line">DELIMITER ;</span><br></pre></td></tr></table></figure></p>
<p>检查存储过程：<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">show</span> <span class="keyword">create</span> <span class="keyword">procedure</span> ordertotal;</span><br></pre></td></tr></table></figure></p>
<h3 id="游标"><a href="#游标" class="headerlink" title="游标"></a>游标</h3><p><strong>游标</strong> 是一个存储在MySQL服务器上的数据库查询，他不是一个<code>select</code>语句，而是被该语句查询出来的结果集。在存储了游标之后，应用程序可以根据需要滚动或浏览其中的数据。<br>游标主要用于交互式应用，其中用户需要滚动屏幕上的数据，并对数据进行浏览或更改。  </p>
<blockquote>
<ul>
<li><strong>只能用于存储过程</strong> MySQL游标只能用于存储过程（和函数）。  </li>
</ul>
</blockquote>
<p>使用游标的过程:  </p>
<ul>
<li>使用之前必须声明(这个过程实际并未填充数据)</li>
<li>声明后，必须打开游标才能使用</li>
<li>对于填有数据的游标，根据需要取出各行</li>
<li>结束使用时，必须关闭游标  </li>
</ul>
<p>创建游标:<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line">DELIMITER |</span><br><span class="line"></span><br><span class="line"><span class="keyword">USE</span> mysql_train|</span><br><span class="line"></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">PROCEDURE</span> <span class="keyword">IF</span> <span class="keyword">EXISTS</span> processorders|</span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">PROCEDURE</span> processorders()</span><br><span class="line"></span><br><span class="line"> <span class="keyword">BEGIN</span></span><br><span class="line">	<span class="comment">-- Declare local variables</span></span><br><span class="line">	<span class="keyword">DECLARE</span> done <span class="built_in">BOOLEAN</span> <span class="keyword">DEFAULT</span> <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">DECLARE</span> o <span class="built_in">INT</span>;</span><br><span class="line">	<span class="keyword">DECLARE</span> t <span class="built_in">DECIMAL</span>(<span class="number">8</span>,<span class="number">2</span>);</span><br><span class="line"></span><br><span class="line">	<span class="comment">-- Declare the cursor</span></span><br><span class="line">	<span class="keyword">DECLARE</span> ordernumbers <span class="keyword">CURSOR</span> </span><br><span class="line">	<span class="keyword">FOR</span> </span><br><span class="line">	<span class="keyword">SELECT</span> order_num <span class="keyword">FROM</span> orders;</span><br><span class="line"></span><br><span class="line">	<span class="comment">-- Dclare continue handler</span></span><br><span class="line">	<span class="comment">-- 0200 是MySQL未找到条件</span></span><br><span class="line">	<span class="keyword">DECLARE</span> CONTINUE <span class="keyword">HANDLER</span> <span class="keyword">FOR</span> <span class="keyword">SQLSTATE</span> <span class="string">'02000'</span> <span class="keyword">SET</span> done=<span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">-- Create a table to store results</span></span><br><span class="line">	<span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="keyword">IF</span> <span class="keyword">NOT</span> <span class="keyword">EXISTS</span> ordertotals(</span><br><span class="line">		order_num <span class="built_in">INT</span>,</span><br><span class="line">		total <span class="built_in">DECIMAL</span>(<span class="number">8</span>,<span class="number">2</span>)</span><br><span class="line">		);</span><br><span class="line"></span><br><span class="line">	<span class="comment">-- Open the cursor</span></span><br><span class="line">	OPEN ordernumbers;</span><br><span class="line"></span><br><span class="line">	<span class="comment">-- Loop through all rows</span></span><br><span class="line">	REPEAT</span><br><span class="line">		<span class="comment">-- Get order number </span></span><br><span class="line">		FETCH ordernumbers INTO o;</span><br><span class="line"></span><br><span class="line">		<span class="comment">-- GET the total of this order</span></span><br><span class="line">		<span class="keyword">CALL</span> ordertotal(o,<span class="number">1</span>,t);</span><br><span class="line"></span><br><span class="line">		<span class="comment">-- Insert order and total into ordertotals</span></span><br><span class="line">		<span class="keyword">INSERT</span> <span class="keyword">INTO</span> ordertotals(order_num,total) <span class="keyword">VALUES</span>(o,t);</span><br><span class="line">	</span><br><span class="line">	<span class="comment">-- End of loop</span></span><br><span class="line">	UNTIL done <span class="keyword">END</span> <span class="keyword">REPEAT</span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">-- Close the cursor</span></span><br><span class="line">	CLOSE ordernumbers;</span><br><span class="line"><span class="keyword">END</span> |</span><br></pre></td></tr></table></figure></p>
<h3 id="触发器"><a href="#触发器" class="headerlink" title="触发器"></a>触发器</h3><h4 id="创建触发器"><a href="#创建触发器" class="headerlink" title="创建触发器"></a>创建触发器</h4><p><img src="http://7xpayt.com1.z0.glb.clouddn.com/%E5%88%9B%E5%BB%BA%E8%A7%A6%E5%8F%91%E5%99%A8.png" alt="创建触发器"></p>
<ul>
<li>只有表支持触发器，视图不支持触发器</li>
<li>每个表最多支持6个触发器  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">trigger</span> newproduct <span class="keyword">after</span> <span class="keyword">insert</span> <span class="keyword">on</span> products <span class="keyword">for</span> <span class="keyword">each</span> <span class="keyword">row</span> <span class="keyword">select</span> <span class="string">'Product added'</span> <span class="keyword">into</span> @ee;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="删除触发器"><a href="#删除触发器" class="headerlink" title="删除触发器"></a>删除触发器</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">drop</span> <span class="keyword">trigger</span> newproduct;</span><br></pre></td></tr></table></figure>
<h3 id="事务管理"><a href="#事务管理" class="headerlink" title="事务管理"></a>事务管理</h3><p><strong>事务处理</strong> 可以用来维护数据库的完整性，他保证成批量的MySQL操作要么完全被执行，要么完全不执行。<br><img src="http://7xpayt.com1.z0.glb.clouddn.com/%E4%BA%8B%E5%8A%A1%E7%9A%84%E5%87%A0%E4%B8%AA%E6%9C%AF%E8%AF%AD.png" alt="事务的几种术语"></p>
<h4 id="控制事务处理"><a href="#控制事务处理" class="headerlink" title="控制事务处理"></a>控制事务处理</h4><p>rollback:<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">START</span> <span class="keyword">TRANSACTION</span>;</span><br><span class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> orders;</span><br><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> orders;</span><br><span class="line"><span class="keyword">ROLLBACK</span> <span class="keyword">SELECT</span> * <span class="keyword">FROM</span> orders;</span><br></pre></td></tr></table></figure></p>
<p>commit:<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">START</span> <span class="keyword">TRANSACTION</span>;</span><br><span class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> orderitems <span class="keyword">WHERE</span> orderitems.order_num=<span class="number">20010</span>;</span><br><span class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> orders <span class="keyword">WHERE</span> orders.order_num=<span class="number">20010</span>;</span><br><span class="line"><span class="keyword">COMMIT</span>;</span><br></pre></td></tr></table></figure></p>
<h3 id="安全管理"><a href="#安全管理" class="headerlink" title="安全管理"></a>安全管理</h3><h4 id="访问控制"><a href="#访问控制" class="headerlink" title="访问控制"></a>访问控制</h4><p>一般情况下不要使用root</p>
<h4 id="用户管理"><a href="#用户管理" class="headerlink" title="用户管理"></a>用户管理</h4><p>MySQL的账号信息存储在名为mysql的表中。<br>创建用户:<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">user</span> ben <span class="keyword">identified</span> <span class="keyword">by</span> <span class="string">'112233'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">rename</span> <span class="keyword">user</span> ben <span class="keyword">to</span> befota;</span><br></pre></td></tr></table></figure></p>
<p>删除用户:<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">drop</span> <span class="keyword">user</span> bfota;</span><br></pre></td></tr></table></figure></p>
<p>附：<br>create.sql<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br></pre></td><td class="code"><pre><span class="line">########################################</span><br><span class="line"># MySQL Crash Course</span><br><span class="line"># http://www.forta.com/books/0672327120/</span><br><span class="line"># Example table creation scripts</span><br><span class="line">########################################</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">########################</span><br><span class="line"># Create customers table</span><br><span class="line">########################</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> customers</span><br><span class="line">(</span><br><span class="line">  cust_id      <span class="built_in">int</span>       <span class="keyword">NOT</span> <span class="literal">NULL</span> AUTO_INCREMENT,</span><br><span class="line">  cust_name    <span class="built_in">char</span>(<span class="number">50</span>)  <span class="keyword">NOT</span> <span class="literal">NULL</span> ,</span><br><span class="line">  cust_address <span class="built_in">char</span>(<span class="number">50</span>)  <span class="literal">NULL</span> ,</span><br><span class="line">  cust_city    <span class="built_in">char</span>(<span class="number">50</span>)  <span class="literal">NULL</span> ,</span><br><span class="line">  cust_state   <span class="built_in">char</span>(<span class="number">5</span>)   <span class="literal">NULL</span> ,</span><br><span class="line">  cust_zip     <span class="built_in">char</span>(<span class="number">10</span>)  <span class="literal">NULL</span> ,</span><br><span class="line">  cust_country <span class="built_in">char</span>(<span class="number">50</span>)  <span class="literal">NULL</span> ,</span><br><span class="line">  cust_contact <span class="built_in">char</span>(<span class="number">50</span>)  <span class="literal">NULL</span> ,</span><br><span class="line">  cust_email   <span class="built_in">char</span>(<span class="number">255</span>) <span class="literal">NULL</span> ,</span><br><span class="line">  PRIMARY <span class="keyword">KEY</span> (cust_id)</span><br><span class="line">) <span class="keyword">ENGINE</span>=<span class="keyword">InnoDB</span>;</span><br><span class="line"></span><br><span class="line">#########################</span><br><span class="line"># Create orderitems table</span><br><span class="line">#########################</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> orderitems</span><br><span class="line">(</span><br><span class="line">  order_num  <span class="built_in">int</span>          <span class="keyword">NOT</span> <span class="literal">NULL</span> ,</span><br><span class="line">  order_item <span class="built_in">int</span>          <span class="keyword">NOT</span> <span class="literal">NULL</span> ,</span><br><span class="line">  prod_id    <span class="built_in">char</span>(<span class="number">10</span>)     <span class="keyword">NOT</span> <span class="literal">NULL</span> ,</span><br><span class="line">  quantity   <span class="built_in">int</span>          <span class="keyword">NOT</span> <span class="literal">NULL</span> ,</span><br><span class="line">  item_price <span class="built_in">decimal</span>(<span class="number">8</span>,<span class="number">2</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> ,</span><br><span class="line">  PRIMARY <span class="keyword">KEY</span> (order_num, order_item)</span><br><span class="line">) <span class="keyword">ENGINE</span>=<span class="keyword">InnoDB</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#####################</span><br><span class="line"># Create orders table</span><br><span class="line">#####################</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> orders</span><br><span class="line">(</span><br><span class="line">  order_num  <span class="built_in">int</span>      <span class="keyword">NOT</span> <span class="literal">NULL</span> AUTO_INCREMENT,</span><br><span class="line">  order_date datetime <span class="keyword">NOT</span> <span class="literal">NULL</span> ,</span><br><span class="line">  cust_id    <span class="built_in">int</span>      <span class="keyword">NOT</span> <span class="literal">NULL</span> ,</span><br><span class="line">  PRIMARY <span class="keyword">KEY</span> (order_num)</span><br><span class="line">) <span class="keyword">ENGINE</span>=<span class="keyword">InnoDB</span>;</span><br><span class="line"></span><br><span class="line">#######################</span><br><span class="line"># Create products table</span><br><span class="line">#######################</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> products</span><br><span class="line">(</span><br><span class="line">  prod_id    <span class="built_in">char</span>(<span class="number">10</span>)      <span class="keyword">NOT</span> <span class="literal">NULL</span>,</span><br><span class="line">  vend_id    <span class="built_in">int</span>           <span class="keyword">NOT</span> <span class="literal">NULL</span> ,</span><br><span class="line">  prod_name  <span class="built_in">char</span>(<span class="number">255</span>)     <span class="keyword">NOT</span> <span class="literal">NULL</span> ,</span><br><span class="line">  prod_price <span class="built_in">decimal</span>(<span class="number">8</span>,<span class="number">2</span>)  <span class="keyword">NOT</span> <span class="literal">NULL</span> ,</span><br><span class="line">  prod_desc  <span class="built_in">text</span>          <span class="literal">NULL</span> ,</span><br><span class="line">  PRIMARY <span class="keyword">KEY</span>(prod_id)</span><br><span class="line">) <span class="keyword">ENGINE</span>=<span class="keyword">InnoDB</span>;</span><br><span class="line"></span><br><span class="line">######################</span><br><span class="line"># Create vendors table</span><br><span class="line">######################</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> vendors</span><br><span class="line">(</span><br><span class="line">  vend_id      <span class="built_in">int</span>      <span class="keyword">NOT</span> <span class="literal">NULL</span> AUTO_INCREMENT,</span><br><span class="line">  vend_name    <span class="built_in">char</span>(<span class="number">50</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> ,</span><br><span class="line">  vend_address <span class="built_in">char</span>(<span class="number">50</span>) <span class="literal">NULL</span> ,</span><br><span class="line">  vend_city    <span class="built_in">char</span>(<span class="number">50</span>) <span class="literal">NULL</span> ,</span><br><span class="line">  vend_state   <span class="built_in">char</span>(<span class="number">5</span>)  <span class="literal">NULL</span> ,</span><br><span class="line">  vend_zip     <span class="built_in">char</span>(<span class="number">10</span>) <span class="literal">NULL</span> ,</span><br><span class="line">  vend_country <span class="built_in">char</span>(<span class="number">50</span>) <span class="literal">NULL</span> ,</span><br><span class="line">  PRIMARY <span class="keyword">KEY</span> (vend_id)</span><br><span class="line">) <span class="keyword">ENGINE</span>=<span class="keyword">InnoDB</span>;</span><br><span class="line"></span><br><span class="line">###########################</span><br><span class="line"># Create productnotes table</span><br><span class="line">###########################</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> productnotes</span><br><span class="line">(</span><br><span class="line">  note_id    <span class="built_in">int</span>           <span class="keyword">NOT</span> <span class="literal">NULL</span> AUTO_INCREMENT,</span><br><span class="line">  prod_id    <span class="built_in">char</span>(<span class="number">10</span>)      <span class="keyword">NOT</span> <span class="literal">NULL</span>,</span><br><span class="line">  note_date datetime       <span class="keyword">NOT</span> <span class="literal">NULL</span>,</span><br><span class="line">  note_text  <span class="built_in">text</span>          <span class="literal">NULL</span> ,</span><br><span class="line">  PRIMARY <span class="keyword">KEY</span>(note_id),</span><br><span class="line">  FULLTEXT(note_text)</span><br><span class="line">) <span class="keyword">ENGINE</span>=MyISAM;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#####################</span><br><span class="line"># Define foreign keys</span><br><span class="line">#####################</span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> orderitems <span class="keyword">ADD</span> <span class="keyword">CONSTRAINT</span> fk_orderitems_orders FOREIGN <span class="keyword">KEY</span> (order_num) <span class="keyword">REFERENCES</span> orders (order_num);</span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> orderitems <span class="keyword">ADD</span> <span class="keyword">CONSTRAINT</span> fk_orderitems_products FOREIGN <span class="keyword">KEY</span> (prod_id) <span class="keyword">REFERENCES</span> products (prod_id);</span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> orders <span class="keyword">ADD</span> <span class="keyword">CONSTRAINT</span> fk_orders_customers FOREIGN <span class="keyword">KEY</span> (cust_id) <span class="keyword">REFERENCES</span> customers (cust_id);</span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> products <span class="keyword">ADD</span> <span class="keyword">CONSTRAINT</span> fk_products_vendors FOREIGN <span class="keyword">KEY</span> (vend_id) <span class="keyword">REFERENCES</span> vendors (vend_id);</span><br></pre></td></tr></table></figure></p>
<p>populate.sql<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br></pre></td><td class="code"><pre><span class="line">########################################</span><br><span class="line"># MySQL Crash Course</span><br><span class="line"># http://www.forta.com/books/0672327120/</span><br><span class="line"># Example table population scripts</span><br><span class="line">########################################</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">##########################</span><br><span class="line"># Populate customers table</span><br><span class="line">##########################</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> customers(cust_id, cust_name, cust_address, cust_city, cust_state, cust_zip, cust_country, cust_contact, cust_email)</span><br><span class="line"><span class="keyword">VALUES</span>(<span class="number">10001</span>, <span class="string">'Coyote Inc.'</span>, <span class="string">'200 Maple Lane'</span>, <span class="string">'Detroit'</span>, <span class="string">'MI'</span>, <span class="string">'44444'</span>, <span class="string">'USA'</span>, <span class="string">'Y Lee'</span>, <span class="string">'ylee@coyote.com'</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> customers(cust_id, cust_name, cust_address, cust_city, cust_state, cust_zip, cust_country, cust_contact)</span><br><span class="line"><span class="keyword">VALUES</span>(<span class="number">10002</span>, <span class="string">'Mouse House'</span>, <span class="string">'333 Fromage Lane'</span>, <span class="string">'Columbus'</span>, <span class="string">'OH'</span>, <span class="string">'43333'</span>, <span class="string">'USA'</span>, <span class="string">'Jerry Mouse'</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> customers(cust_id, cust_name, cust_address, cust_city, cust_state, cust_zip, cust_country, cust_contact, cust_email)</span><br><span class="line"><span class="keyword">VALUES</span>(<span class="number">10003</span>, <span class="string">'Wascals'</span>, <span class="string">'1 Sunny Place'</span>, <span class="string">'Muncie'</span>, <span class="string">'IN'</span>, <span class="string">'42222'</span>, <span class="string">'USA'</span>, <span class="string">'Jim Jones'</span>, <span class="string">'rabbit@wascally.com'</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> customers(cust_id, cust_name, cust_address, cust_city, cust_state, cust_zip, cust_country, cust_contact, cust_email)</span><br><span class="line"><span class="keyword">VALUES</span>(<span class="number">10004</span>, <span class="string">'Yosemite Place'</span>, <span class="string">'829 Riverside Drive'</span>, <span class="string">'Phoenix'</span>, <span class="string">'AZ'</span>, <span class="string">'88888'</span>, <span class="string">'USA'</span>, <span class="string">'Y Sam'</span>, <span class="string">'sam@yosemite.com'</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> customers(cust_id, cust_name, cust_address, cust_city, cust_state, cust_zip, cust_country, cust_contact)</span><br><span class="line"><span class="keyword">VALUES</span>(<span class="number">10005</span>, <span class="string">'E Fudd'</span>, <span class="string">'4545 53rd Street'</span>, <span class="string">'Chicago'</span>, <span class="string">'IL'</span>, <span class="string">'54545'</span>, <span class="string">'USA'</span>, <span class="string">'E Fudd'</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">########################</span><br><span class="line"># Populate vendors table</span><br><span class="line">########################</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> vendors(vend_id, vend_name, vend_address, vend_city, vend_state, vend_zip, vend_country)</span><br><span class="line"><span class="keyword">VALUES</span>(<span class="number">1001</span>,<span class="string">'Anvils R Us'</span>,<span class="string">'123 Main Street'</span>,<span class="string">'Southfield'</span>,<span class="string">'MI'</span>,<span class="string">'48075'</span>, <span class="string">'USA'</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> vendors(vend_id, vend_name, vend_address, vend_city, vend_state, vend_zip, vend_country)</span><br><span class="line"><span class="keyword">VALUES</span>(<span class="number">1002</span>,<span class="string">'LT Supplies'</span>,<span class="string">'500 Park Street'</span>,<span class="string">'Anytown'</span>,<span class="string">'OH'</span>,<span class="string">'44333'</span>, <span class="string">'USA'</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> vendors(vend_id, vend_name, vend_address, vend_city, vend_state, vend_zip, vend_country)</span><br><span class="line"><span class="keyword">VALUES</span>(<span class="number">1003</span>,<span class="string">'ACME'</span>,<span class="string">'555 High Street'</span>,<span class="string">'Los Angeles'</span>,<span class="string">'CA'</span>,<span class="string">'90046'</span>, <span class="string">'USA'</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> vendors(vend_id, vend_name, vend_address, vend_city, vend_state, vend_zip, vend_country)</span><br><span class="line"><span class="keyword">VALUES</span>(<span class="number">1004</span>,<span class="string">'Furball Inc.'</span>,<span class="string">'1000 5th Avenue'</span>,<span class="string">'New York'</span>,<span class="string">'NY'</span>,<span class="string">'11111'</span>, <span class="string">'USA'</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> vendors(vend_id, vend_name, vend_address, vend_city, vend_state, vend_zip, vend_country)</span><br><span class="line"><span class="keyword">VALUES</span>(<span class="number">1005</span>,<span class="string">'Jet Set'</span>,<span class="string">'42 Galaxy Road'</span>,<span class="string">'London'</span>, <span class="literal">NULL</span>,<span class="string">'N16 6PS'</span>, <span class="string">'England'</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> vendors(vend_id, vend_name, vend_address, vend_city, vend_state, vend_zip, vend_country)</span><br><span class="line"><span class="keyword">VALUES</span>(<span class="number">1006</span>,<span class="string">'Jouets Et Ours'</span>,<span class="string">'1 Rue Amusement'</span>,<span class="string">'Paris'</span>, <span class="literal">NULL</span>,<span class="string">'45678'</span>, <span class="string">'France'</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#########################</span><br><span class="line"># Populate products table</span><br><span class="line">#########################</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> products(prod_id, vend_id, prod_name, prod_price, prod_desc)</span><br><span class="line"><span class="keyword">VALUES</span>(<span class="string">'ANV01'</span>, <span class="number">1001</span>, <span class="string">'.5 ton anvil'</span>, <span class="number">5.99</span>, <span class="string">'.5 ton anvil, black, complete with handy hook'</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> products(prod_id, vend_id, prod_name, prod_price, prod_desc)</span><br><span class="line"><span class="keyword">VALUES</span>(<span class="string">'ANV02'</span>, <span class="number">1001</span>, <span class="string">'1 ton anvil'</span>, <span class="number">9.99</span>, <span class="string">'1 ton anvil, black, complete with handy hook and carrying case'</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> products(prod_id, vend_id, prod_name, prod_price, prod_desc)</span><br><span class="line"><span class="keyword">VALUES</span>(<span class="string">'ANV03'</span>, <span class="number">1001</span>, <span class="string">'2 ton anvil'</span>, <span class="number">14.99</span>, <span class="string">'2 ton anvil, black, complete with handy hook and carrying case'</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> products(prod_id, vend_id, prod_name, prod_price, prod_desc)</span><br><span class="line"><span class="keyword">VALUES</span>(<span class="string">'OL1'</span>, <span class="number">1002</span>, <span class="string">'Oil can'</span>, <span class="number">8.99</span>, <span class="string">'Oil can, red'</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> products(prod_id, vend_id, prod_name, prod_price, prod_desc)</span><br><span class="line"><span class="keyword">VALUES</span>(<span class="string">'FU1'</span>, <span class="number">1002</span>, <span class="string">'Fuses'</span>, <span class="number">3.42</span>, <span class="string">'1 dozen, extra long'</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> products(prod_id, vend_id, prod_name, prod_price, prod_desc)</span><br><span class="line"><span class="keyword">VALUES</span>(<span class="string">'SLING'</span>, <span class="number">1003</span>, <span class="string">'Sling'</span>, <span class="number">4.49</span>, <span class="string">'Sling, one size fits all'</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> products(prod_id, vend_id, prod_name, prod_price, prod_desc)</span><br><span class="line"><span class="keyword">VALUES</span>(<span class="string">'TNT1'</span>, <span class="number">1003</span>, <span class="string">'TNT (1 stick)'</span>, <span class="number">2.50</span>, <span class="string">'TNT, red, single stick'</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> products(prod_id, vend_id, prod_name, prod_price, prod_desc)</span><br><span class="line"><span class="keyword">VALUES</span>(<span class="string">'TNT2'</span>, <span class="number">1003</span>, <span class="string">'TNT (5 sticks)'</span>, <span class="number">10</span>, <span class="string">'TNT, red, pack of 10 sticks'</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> products(prod_id, vend_id, prod_name, prod_price, prod_desc)</span><br><span class="line"><span class="keyword">VALUES</span>(<span class="string">'FB'</span>, <span class="number">1003</span>, <span class="string">'Bird seed'</span>, <span class="number">10</span>, <span class="string">'Large bag (suitable for road runners)'</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> products(prod_id, vend_id, prod_name, prod_price, prod_desc)</span><br><span class="line"><span class="keyword">VALUES</span>(<span class="string">'FC'</span>, <span class="number">1003</span>, <span class="string">'Carrots'</span>, <span class="number">2.50</span>, <span class="string">'Carrots (rabbit hunting season only)'</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> products(prod_id, vend_id, prod_name, prod_price, prod_desc)</span><br><span class="line"><span class="keyword">VALUES</span>(<span class="string">'SAFE'</span>, <span class="number">1003</span>, <span class="string">'Safe'</span>, <span class="number">50</span>, <span class="string">'Safe with combination lock'</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> products(prod_id, vend_id, prod_name, prod_price, prod_desc)</span><br><span class="line"><span class="keyword">VALUES</span>(<span class="string">'DTNTR'</span>, <span class="number">1003</span>, <span class="string">'Detonator'</span>, <span class="number">13</span>, <span class="string">'Detonator (plunger powered), fuses not included'</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> products(prod_id, vend_id, prod_name, prod_price, prod_desc)</span><br><span class="line"><span class="keyword">VALUES</span>(<span class="string">'JP1000'</span>, <span class="number">1005</span>, <span class="string">'JetPack 1000'</span>, <span class="number">35</span>, <span class="string">'JetPack 1000, intended for single use'</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> products(prod_id, vend_id, prod_name, prod_price, prod_desc)</span><br><span class="line"><span class="keyword">VALUES</span>(<span class="string">'JP2000'</span>, <span class="number">1005</span>, <span class="string">'JetPack 2000'</span>, <span class="number">55</span>, <span class="string">'JetPack 2000, multi-use'</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#######################</span><br><span class="line"># Populate orders table</span><br><span class="line">#######################</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> orders(order_num, order_date, cust_id)</span><br><span class="line"><span class="keyword">VALUES</span>(<span class="number">20005</span>, <span class="string">'2005-09-01'</span>, <span class="number">10001</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> orders(order_num, order_date, cust_id)</span><br><span class="line"><span class="keyword">VALUES</span>(<span class="number">20006</span>, <span class="string">'2005-09-12'</span>, <span class="number">10003</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> orders(order_num, order_date, cust_id)</span><br><span class="line"><span class="keyword">VALUES</span>(<span class="number">20007</span>, <span class="string">'2005-09-30'</span>, <span class="number">10004</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> orders(order_num, order_date, cust_id)</span><br><span class="line"><span class="keyword">VALUES</span>(<span class="number">20008</span>, <span class="string">'2005-10-03'</span>, <span class="number">10005</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> orders(order_num, order_date, cust_id)</span><br><span class="line"><span class="keyword">VALUES</span>(<span class="number">20009</span>, <span class="string">'2005-10-08'</span>, <span class="number">10001</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">###########################</span><br><span class="line"># Populate orderitems table</span><br><span class="line">###########################</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> orderitems(order_num, order_item, prod_id, quantity, item_price)</span><br><span class="line"><span class="keyword">VALUES</span>(<span class="number">20005</span>, <span class="number">1</span>, <span class="string">'ANV01'</span>, <span class="number">10</span>, <span class="number">5.99</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> orderitems(order_num, order_item, prod_id, quantity, item_price)</span><br><span class="line"><span class="keyword">VALUES</span>(<span class="number">20005</span>, <span class="number">2</span>, <span class="string">'ANV02'</span>, <span class="number">3</span>, <span class="number">9.99</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> orderitems(order_num, order_item, prod_id, quantity, item_price)</span><br><span class="line"><span class="keyword">VALUES</span>(<span class="number">20005</span>, <span class="number">3</span>, <span class="string">'TNT2'</span>, <span class="number">5</span>, <span class="number">10</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> orderitems(order_num, order_item, prod_id, quantity, item_price)</span><br><span class="line"><span class="keyword">VALUES</span>(<span class="number">20005</span>, <span class="number">4</span>, <span class="string">'FB'</span>, <span class="number">1</span>, <span class="number">10</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> orderitems(order_num, order_item, prod_id, quantity, item_price)</span><br><span class="line"><span class="keyword">VALUES</span>(<span class="number">20006</span>, <span class="number">1</span>, <span class="string">'JP2000'</span>, <span class="number">1</span>, <span class="number">55</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> orderitems(order_num, order_item, prod_id, quantity, item_price)</span><br><span class="line"><span class="keyword">VALUES</span>(<span class="number">20007</span>, <span class="number">1</span>, <span class="string">'TNT2'</span>, <span class="number">100</span>, <span class="number">10</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> orderitems(order_num, order_item, prod_id, quantity, item_price)</span><br><span class="line"><span class="keyword">VALUES</span>(<span class="number">20008</span>, <span class="number">1</span>, <span class="string">'FC'</span>, <span class="number">50</span>, <span class="number">2.50</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> orderitems(order_num, order_item, prod_id, quantity, item_price)</span><br><span class="line"><span class="keyword">VALUES</span>(<span class="number">20009</span>, <span class="number">1</span>, <span class="string">'FB'</span>, <span class="number">1</span>, <span class="number">10</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> orderitems(order_num, order_item, prod_id, quantity, item_price)</span><br><span class="line"><span class="keyword">VALUES</span>(<span class="number">20009</span>, <span class="number">2</span>, <span class="string">'OL1'</span>, <span class="number">1</span>, <span class="number">8.99</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> orderitems(order_num, order_item, prod_id, quantity, item_price)</span><br><span class="line"><span class="keyword">VALUES</span>(<span class="number">20009</span>, <span class="number">3</span>, <span class="string">'SLING'</span>, <span class="number">1</span>, <span class="number">4.49</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> orderitems(order_num, order_item, prod_id, quantity, item_price)</span><br><span class="line"><span class="keyword">VALUES</span>(<span class="number">20009</span>, <span class="number">4</span>, <span class="string">'ANV03'</span>, <span class="number">1</span>, <span class="number">14.99</span>);</span><br><span class="line"></span><br><span class="line">#############################</span><br><span class="line"># Populate productnotes table</span><br><span class="line">#############################</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> productnotes(note_id, prod_id, note_date, note_text)</span><br><span class="line"><span class="keyword">VALUES</span>(<span class="number">101</span>, <span class="string">'TNT2'</span>, <span class="string">'2005-08-17'</span>,</span><br><span class="line"><span class="string">'Customer complaint:</span></span><br><span class="line"><span class="string">Sticks not individually wrapped, too easy to mistakenly detonate all at once.</span></span><br><span class="line"><span class="string">Recommend individual wrapping.'</span></span><br><span class="line">);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> productnotes(note_id, prod_id, note_date, note_text)</span><br><span class="line"><span class="keyword">VALUES</span>(<span class="number">102</span>, <span class="string">'OL1'</span>, <span class="string">'2005-08-18'</span>,</span><br><span class="line"><span class="string">'Can shipped full, refills not available.</span></span><br><span class="line"><span class="string">Need to order new can if refill needed.'</span></span><br><span class="line">);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> productnotes(note_id, prod_id, note_date, note_text)</span><br><span class="line"><span class="keyword">VALUES</span>(<span class="number">103</span>, <span class="string">'SAFE'</span>, <span class="string">'2005-08-18'</span>,</span><br><span class="line"><span class="string">'Safe is combination locked, combination not provided with safe.</span></span><br><span class="line"><span class="string">This is rarely a problem as safes are typically blown up or dropped by customers.'</span></span><br><span class="line">);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> productnotes(note_id, prod_id, note_date, note_text)</span><br><span class="line"><span class="keyword">VALUES</span>(<span class="number">104</span>, <span class="string">'FC'</span>, <span class="string">'2005-08-19'</span>,</span><br><span class="line"><span class="string">'Quantity varies, sold by the sack load.</span></span><br><span class="line"><span class="string">All guaranteed to be bright and orange, and suitable for use as rabbit bait.'</span></span><br><span class="line">);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> productnotes(note_id, prod_id, note_date, note_text)</span><br><span class="line"><span class="keyword">VALUES</span>(<span class="number">105</span>, <span class="string">'TNT2'</span>, <span class="string">'2005-08-20'</span>,</span><br><span class="line"><span class="string">'Included fuses are short and have been known to detonate too quickly for some customers.</span></span><br><span class="line"><span class="string">Longer fuses are available (item FU1) and should be recommended.'</span></span><br><span class="line">);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> productnotes(note_id, prod_id, note_date, note_text)</span><br><span class="line"><span class="keyword">VALUES</span>(<span class="number">106</span>, <span class="string">'TNT2'</span>, <span class="string">'2005-08-22'</span>,</span><br><span class="line"><span class="string">'Matches not included, recommend purchase of matches or detonator (item DTNTR).'</span></span><br><span class="line">);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> productnotes(note_id, prod_id, note_date, note_text)</span><br><span class="line"><span class="keyword">VALUES</span>(<span class="number">107</span>, <span class="string">'SAFE'</span>, <span class="string">'2005-08-23'</span>,</span><br><span class="line"><span class="string">'Please note that no returns will be accepted if safe opened using explosives.'</span></span><br><span class="line">);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> productnotes(note_id, prod_id, note_date, note_text)</span><br><span class="line"><span class="keyword">VALUES</span>(<span class="number">108</span>, <span class="string">'ANV01'</span>, <span class="string">'2005-08-25'</span>,</span><br><span class="line"><span class="string">'Multiple customer returns, anvils failing to drop fast enough or falling backwards on purchaser. Recommend that customer considers using heavier anvils.'</span></span><br><span class="line">);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> productnotes(note_id, prod_id, note_date, note_text)</span><br><span class="line"><span class="keyword">VALUES</span>(<span class="number">109</span>, <span class="string">'ANV03'</span>, <span class="string">'2005-09-01'</span>,</span><br><span class="line"><span class="string">'Item is extremely heavy. Designed for dropping, not recommended for use with slings, ropes, pulleys, or tightropes.'</span></span><br><span class="line">);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> productnotes(note_id, prod_id, note_date, note_text)</span><br><span class="line"><span class="keyword">VALUES</span>(<span class="number">110</span>, <span class="string">'FC'</span>, <span class="string">'2005-09-01'</span>,</span><br><span class="line"><span class="string">'Customer complaint: rabbit has been able to detect trap, food apparently less effective now.'</span></span><br><span class="line">);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> productnotes(note_id, prod_id, note_date, note_text)</span><br><span class="line"><span class="keyword">VALUES</span>(<span class="number">111</span>, <span class="string">'SLING'</span>, <span class="string">'2005-09-02'</span>,</span><br><span class="line"><span class="string">'Shipped unassembled, requires common tools (including oversized hammer).'</span></span><br><span class="line">);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> productnotes(note_id, prod_id, note_date, note_text)</span><br><span class="line"><span class="keyword">VALUES</span>(<span class="number">112</span>, <span class="string">'SAFE'</span>, <span class="string">'2005-09-02'</span>,</span><br><span class="line"><span class="string">'Customer complaint:</span></span><br><span class="line"><span class="string">Circular hole in safe floor can apparently be easily cut with handsaw.'</span></span><br><span class="line">);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> productnotes(note_id, prod_id, note_date, note_text)</span><br><span class="line"><span class="keyword">VALUES</span>(<span class="number">113</span>, <span class="string">'ANV01'</span>, <span class="string">'2005-09-05'</span>,</span><br><span class="line"><span class="string">'Customer complaint:</span></span><br><span class="line"><span class="string">Not heavy enough to generate flying stars around head of victim. If being purchased for dropping, recommend ANV02 or ANV03 instead.'</span></span><br><span class="line">);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> productnotes(note_id, prod_id, note_date, note_text)</span><br><span class="line"><span class="keyword">VALUES</span>(<span class="number">114</span>, <span class="string">'SAFE'</span>, <span class="string">'2005-09-07'</span>,</span><br><span class="line"><span class="string">'Call from individual trapped in safe plummeting to the ground, suggests an escape hatch be added.</span></span><br><span class="line"><span class="string">Comment forwarded to vendor.'</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure></p>

        </div>
        <div class="post-reply">
            
                <!-- 来必力City版安装代码 -->
                <div id="lv-container" data-id="city" data-uid="MTAyMC8yOTE4Ni81NzUz">
                    <script type="text/javascript">
                        (function(d, s) {
                            var j, e = d.getElementsByTagName(s)[0];

                            if (typeof LivereTower === 'function') { return; }

                            j = d.createElement(s);
                            j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
                            j.async = true;

                            e.parentNode.insertBefore(j, e);
                        })(document, 'script');
                    </script>
                    <noscript> 为正常使用来必力评论功能请激活JavaScript</noscript>
                </div>
                <!-- City版安装代码已完成 -->
            
            
        </div>
    </div>
</section>
<script>
    // 获取第一张图, 用以当封面背景图
    var img = document.querySelectorAll('img')[1]

    if (img) {
        var header_box = document.querySelector('#header_box')
        header_box.style.backgroundImage = 'url('+ img.src +')'
    }
</script>
      </div>
  </div>
  <style>
  #footer {
    min-height: 10vh;
    background: black;
    color: #fff;
  }

  #footer a {
    color: #e1e1e1;
  }
</style>
<footer id="footer" class="has-text-centered is-flex center">
  <div class="container has-padding">
    <div>
      <div>
        <!--请您保留作者署名, 主题制作来之不易-->
        Theme by <a href="http://haojen.github.io/">Haojen Ma</a>
        <br>
        Copyright © 袁发洋 2018
        <br>
        Propulsé by <a href="http://hexo.io/" target="_blank">Hexo</a>
      </div>
    </div>
  </div>
</footer>

<script src="/js/search_core.js"></script>
<script src="/js/script.js"></script>

</body>
</html>